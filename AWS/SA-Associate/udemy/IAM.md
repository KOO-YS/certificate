# IAM

## Identity and Access Management, Global Service

- root 계정은 기본으로 생성되지만, 사용하지도 공유하지도 말아야 한다 → 대신해서 user를 생성할 것
- user를 그룹화 할 수 있지만, 그룹 내 그룹은 있을 수 없다.
- user는 어떤 그룹에 속하지 않을 수도, 여러 그룹에 속할 수도 있다.

## Permission

사용자와 그룹을 생성하는 이유가 무엇일까? → AWS 계정을 사용하도록 허용하고, 허용을 위해 사용자에게 권한을 주는 것

### IAM Document

사용자와 그룹 권한 정보를 Json 형식으로 정의할 수 있다.

AWS는 사용자에게 모든 권한을 주지 않는다. 새로운 사용자가 비용이나 보안 문제를 야기할 수 있기 때문

**AWS에서는 “최소 권한의 원칙 (least privilege principle)”을 적용한다**

사용자가 꼭 필요로 하는 것 이상의 권한을 주지 않는다는 뜻


<br>

## IAM 보안 도구

- IAM Credentials Report ( IAM 자격 증명 보고서 )
    - 계정 수준의 보안도구
    - 계정에 있는 사용자와 다양한 자격 증명의 상태 포함
- IAM Access Advisor ( IAM 액세스 관리자 )
    - 사용자 수준의 보안도구
    - 사용자에게 부여된 서비스의 권한과 해당 서비스에 마지막으로 액세스한 시간이 보인다
    - 최소권한의 원칙에 매우 적절
        - 해당 도구를 사용해 어떤 권한이 사용되지 않는지 확인할 수 있으니, 권한도 줄일 수 있다

#### IAM Credentials Report ( IAM 자격 증명 보고서 ) 
확인할 수 있는 정보

- 사용자가 언제 생성되었는지
- 비밀번호가 활성화되어 있는지
- 비밀번호가 마지막으로 언제 사용되었는지
- 비밀번호 변경 주기를 활성화한 경우 다음 주기가 언제인지
- MFA가 활성화 되어 있는지
- 액세스 키가 생성되어 있는지
- 기타 등등


<br>

#### IAM Access Advisor ( IAM 액세스 관리자 )
- 추적 기간에 엑세스 되지 않은 권한들은 삭제하는 게 좋을 수도 있다.
    - 사용자가 서비스를 사용하지 않기 때문

<br>

## IAM 가이드라인

- 루트 계정은 AWS 계정을 설정할 때를 제외하고 사용하지 말 것
- 하나의 AWS 사용자는 한명의 실제 사용자라고 생각하고, 실제 사용자가 늘 때마다 새 계정을 생성하는 것이 옳다
- 사용자는 그룹에 넣어 해당 그룹에 권한을 부여할 수 있다. 그룹 수준에서 권한을 관리할 것
- 비밀번호 정책을 강력하게 만들 것 + 다요소 인증(MFA)을 사용할 것
- AWS 서비스에 권한을 부여할 때마다 역할을 만들고 사용할 것
- AWS를 프로그래밍할 경우 (CLI, SDK를 사용할 경우) 반드시 액세스 키를 만들고 보안을 유지할 것
- 계정 권한을 감사하기 위해 IAM 자격 증명 보고서와 IAM 액세스 분석기를 사용할 것
- IAM 사용자와 액세스 키를 공유하지 말것