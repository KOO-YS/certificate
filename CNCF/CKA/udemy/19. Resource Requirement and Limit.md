# Resource Requirement And Limit

kube-scheduler는 pod를 어느 노드에 위치시킬지 결정한다
고려사항은
- Pod에 의해 요구되는 리소스 양
- 그리고 그 양을 감당할 수 있는 Node
이며, Pod를 위치시키기 위해 가장 적합한 Node를 식별하는 역할을 한다

```yaml
apiVersion: v1
kind: Pod
metadata:
    name:
spec:
    containers:
    - name: my-container
      image: nginx
      ports: 
        - containerPort: 8080
      resources:
        requests: # 요구되는 리소스 양
          memory: "4Gi"
          cpu: 2
```

- 기본적으로 Node 내부에서 컨테이너는 소비 가능한 리소스 양에 제한이 없다
- Pod 내 컨테이너는 CPU와 함께 실행 시작하며 요구하면 할수록 더 많은 리소스를 소비할 수 있다

### Resource Limit
- Pod 내 리소스 사용량을 제한할 수 있다

```yaml
apiVersion: v1
kind: Pod
metadata:
    name:
spec:
    containers:
    - name: my-container
      image: nginx
      ports: 
        - containerPort: 8080
      resources:
        requests:
          memory: "1Gi"
          cpu: 1
        limit: # 리소스 사용 제한
          memory: "2Gi"
          cpu: 2
```
#### Exceed Limits 
- 다수 컨테이너가 Pod에 있다면 request와 limit은 각각 컨테이너에 개별적으로 할당된다
- **리소스 사용량을 초과한다면?**
    - CPU 사용량 : CPU 같은 경우, 리소스 제한보다 초과로 사용할 수 없다!
    - memory 사용량 : memory는 제한보다 더 많이 사용할 수 있다. 계속해서 초과를 한다면 해당 pod는 중지되고, OOM(Out Of Memory) 에러 발생