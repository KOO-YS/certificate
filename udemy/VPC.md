## CIDR : Classless Inter-Domain Routing

- 클래스 없는 도메인 간 라우팅
- IP 주소를 할당하는 방법
- 보안 그룹 규칙과 AW 네트워킹에 사용
    - 보안 그룹 규칙의 Source의 `*.*.*.*/*` → IP 범위 정의
- CIDR 구성요소
    - IP 구성요소 중에서 Base IP 범위 → 범위의 시작점
    - 서브넷 마스크 → IP에서 변경 가능한 비트의 개수 정의
### IPv4 환경의 Public IP vs Private IP

- IANA (The Internet Assigned Numbers Authority)이 구축한 특정 IPv4 주소 블록은 private 사설(LAN)과 공용(Internet) 주소로 사용된다
- Private IP : 특정 값만 허용
- Public IP : 이외의 전 세계에 있는 IP 주소. 인터넷상에 있는 공용 IP 주소

<br>

# VPC : Virtual Private Cloud
- 단일 AWS 리전에 여러 VPC를 둘 수 있으며, 리전당 최대 5개까지 가능 (원하면 늘릴 수 있음 - soft limit)
- VPC는 사설 리소스이기 때문에 사설 IPv4범위만 허용
- VPC CIDR은 다른 VPC나 네트워크, 기업 네트워크와 절대 겹치면 안된다

---

- 새로운 AWS 계정은 모두 기본 VPC가 있으며 바로 사용 가능하다
- 새로운 EC2 인스턴스는 서브셋을 지정하지 않으면 기본 VPC에 실행된다
    - 기본 VPC는 처음부터 인터넷에 연결되어 있어서 인스턴스가 인터넷에 액세스하고 또 내부의 EC2 인스턴스는 공용 IPv4 주소를 얻는다
    - EC2 인스턴스를 생성하자마자 연결할 수 있는 이유
- EC2 인스턴스를 위한 공용 및 사설 IPv4 DNS 이름을 얻는다

<br>


## Subnet

- VPC 내부에 있는 IPv4 주소의 부분 범위
- 이 범위 내에서 AWS가 IP 주소 다섯 개를 예약
    - 처음 4개와 마지막 1개를 서브넷마다 예약 → 이 주소들은 IP 주소로 사용될 수 없으며 EC2 인스턴스에 IP로 할당되지 못함
- 예약된 5개의 IP 주소 → [example] `10.0.0.0/24`
    - `10.0.0.0` : 네트워크 주소
    - `10.0.0.1` : `.1` → VPC 라우터용으로 예약
    - `10.0.0.2` : `.2` → AWS가 제공한 DNS에 매핑
    - `10.0.0.3` : `.3` → 미래 사용을 위해 예약
    - `10.0.0.255` : `.255` → 네트워크 브로드캐스트 주소. ⚠️ AWS는 VPC에서 브로드캐스트를 지원하지 않기에 예약은 되었지만 사용은 불가능

<br>


### IGW : Internet Gateway

- 인터넷 게이트웨이 : VPC 내부 (EC2 인스턴스나 람다 함수 등) 모든 리소스를 인터넷에 연결
- 수평으로 확장되고 가용성과 중복성이 높은 관리형 리소스
- VPC와는 별개로 생성해야 함
- VPC는 인터넷 게이트웨이와 1:1로 연결
- 인터넷 게이트웨이 자체는 인터넷 액세스를 허용하지 않음
    - VPC와 연결 후 라우팅 테이블 역시 수정이 필요
    - 라우팅 테이블을 생성 후 VPC를 할당, Subnet Associations에서 서브넷을 추가