# S3

- 무한 확장 가능한 스토리지 → 크기를 사전에 정의할 필요가 없음
- 객체를 저장하게 해주는 시스템이자 서비스
- 파일이 버킷 or 디렉토리에 있으며 각 버킷은 globally 고유 이름을 가진다

<br>

## Buckets

- S3는 전역 서비스이지만 buckets은 리전 리소스
- **명명 규칙**
    - 대문자 포함 금지
    - 밑줄(_)을 사용하지 말 것
    - 길이 : 3 ~ 63 characters long
    - IP 주소 사용 금지
    - 소문자/숫자 중에서 시작
- **Objects**
    - 객체는 파일이며, 키를 가진다 → 파일의 전체 경로로 사용
    - 키의 구성 : prefix + object name
    - 버킷은 디렉토리 개념 없이 키 이름만 길다
        - s3은 ‘/’를 가진 매우 긴 이름의 키만 가지고 있다 (디렉토리 x)
    - 객체의 최대 크기는 5TB
        - 한 번에 5TB 업로드 불가 → 쪼개서 각각 업로드 : 멀티파트 업로드
    - 시스템, 사용자 관련 메타데이터 사용 → 키-밸류 쌍 리스트
    - 보안과 수명 주기 관련해서는 태그 사용 → 유니코드 키-밸류 쌍 10개 이하
- **객체 파일을 여는 법**
    1. 객체 상세 페이지에 들어가서 Object action 탭 > Open 클릭
    2. 객체 상세 페이지의 공용 오브젝트 URL 사용
        - 기본 Obejct URL에 접근하면 접근 거부를 반환할 것 → 버킷은 공용이 아니기 때문
        - 미리 서명된 URL 필요 → 임시 보안 인증 제공
- **Version ID**

<br>

## Versioning

- S3 파일을 버저닝 하기 위해서는 버킷 레벨에서 활성화가 될 필요
    - 같은 키로 파일 버전을 다시 업로드하는 경우,
        - ~~기존 파일을 덮어 쓴다~~ X
        - 해당 파일의 새로운 버전을 생성 O
- 버킷을 버저닝하면 모든 파일 버전을 어느 정도 유지하는 것이 가장 좋은 방법
    - 원치 않은 삭제로부터 보호받을 수 있기 때문
    - 이전 버전을 복원할 수 있기 때문
    - 필요한 이전 버전으로 손쉽게 되돌릴 수 있다
- 버저닝을 활성화하기 전, 버전 관리 되지 않은 파일 → null 버전
- 버킷의 버저닝을 중단할 경우
    - 이전 버전을 삭제 X
    - 이후의 파일이 버전을 할당받지 못하도록 O

<br>

## S3 Encryption for Objects

- s3에 객체를 업로드할 경우 AWS 내의 서버가 되므로 객체로의 접근을 보호

**S3에서 객체 암호화를 위한 4가지 방법**

- SSE-E3 : AWS가 처리 및 관리하는 키를 사용해 S3 객체를 암호화하는 방법
- SSE-KMS : AWS 키 관리 서비스를 사용해서 암호화 키를 관리하는 방법
- SSE-C : 사용자가 만든 암호화 키를 관리할 때 사용하는 방법
- 클라이언트 측 암호화